# Backend Runtime Configuration
# Copy to .env and fill in values
#
# Purpose: Backend application config (FastAPI, database clients, external APIs)
# Used by: Python application code via python-dotenv
# NOT used by: Docker Compose (use .env.compose for that)

# App
ENVIRONMENT=local
LOG_LEVEL=  # Optional: DEBUG, INFO, WARNING, ERROR. Defaults to DEBUG for local, INFO otherwise

# CORS - Additional allowed origins (comma-separated)
# Localhost origins are always allowed. Add your production/tunnel domains here.
# Example: https://finances.example.com,https://app.example.com
CORS_ORIGINS=

# Database Connection (runtime, not container setup)
# These values should match what's in .env.compose
POSTGRES_HOSTNAME=localhost
POSTGRES_PORT=5432
POSTGRES_USERNAME=personal_finances
POSTGRES_PASSWORD=changeme
POSTGRES_DATABASE=personal_finances

# Dagster uses separate database
POSTGRES_DAGSTER_DATABASE=dagster

# DuckDB analytics database path
# Default: backend/data/analytics.duckdb (relative to backend dir)
# For server deployments, set to absolute path outside repo (e.g., /var/data/analytics.duckdb)
DUCKDB_PATH=

# Security
JWT_SECRET=your-secret-key-min-32-chars-change-in-production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=30

# Cookie domain for auth cookies (production only)
# Required when frontend and backend are on different subdomains (e.g., app.example.com and api.example.com)
# Set to the parent domain with leading dot: .example.com
# Leave empty for local development
COOKIE_DOMAIN=

# Admin token for protected operations (e.g., user registration)
# Required in non-local environments. Generate with: openssl rand -hex 32
ADMIN_TOKEN=

# API docs (Swagger UI at /docs, ReDoc at /redoc)
# Set to "true" to disable in production
DISABLE_API_DOCS=

# GoCardless
GC_CALLBACK_URL=http://localhost:3000/accounts
GC_SECRET_ID=your_gocardless_secret_id
GC_SECRET_KEY=your_gocardless_secret_key

# Dagster (for triggering jobs from API)
DAGSTER_URL=http://localhost:3001

# Default User (for seed-user script)
DEFAULT_USER_USERNAME=oli
DEFAULT_USER_PASSWORD=changeme
DEFAULT_USER_FIRST_NAME=Oli
DEFAULT_USER_LAST_NAME=King

# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=
# Optional: Restrict which chat IDs can interact with the bot (comma-separated)
# Leave empty to allow any chat to link via /link command
TELEGRAM_ALLOWED_CHAT_IDS=

# Trading 212 Integration
# Encryption key for storing Trading 212 API keys securely
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
T212_ENCRYPTION_KEY=4G5F8ssF2_oSL5soMq_znktmvqQ8mzn69GbsiQk6rgY=

# S3 Exports
# Bucket for storing export files (CSV/Parquet)
S3_EXPORTS_BUCKET=
AWS_REGION=eu-west-2
